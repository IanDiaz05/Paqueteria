<div class="container-fluid py-4">
  <h1 class="mb-4">Dashboard de Envíos</h1>

  <ng-container *ngIf="loading; else dashboardContent">
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>
  </ng-container>

  <ng-template #dashboardContent>
    <div class="row g-4">
      <!-- Tarjetas de estadísticas -->
      <div class="col-md-3">
        <app-minicard 
        borderColor="primary"
        title="Envíos Totales" 
        content="{{dashboardData?.totalShipments || 0}}"
        icon="bi-box-seam"
        />
      </div>
      <div class="col-md-3">
        <app-minicard 
        borderColor="success"
        title="Envíos Entregados" 
        content="{{dashboardData?.delivered || 0}}"
        icon="bi-check-circle"
        />
      </div>
      
      <!-- Tabla de envíos recientes -->
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5>Últimos Envíos</h5>
          </div>
          <div class="card-body">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Guía</th>
                  <th>Destino</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let shipment of recentShipments; trackBy: trackByShipmentId">
                  <td>{{shipment.tracking_number}}</td>
                  <td>{{shipment.destination}}</td>
                  <td>
                    <span class="badge" [ngClass]="{
                    'bg-success': shipment.status === 'entregado',
                    'bg-warning': shipment.status === 'procesamiento',
                    'bg-info': shipment.status === 'en tránsito',
                    'bg-primary': shipment.status === 'en reparto',
                    'bg-secondary': shipment.status === 'registrado'
                    }">
                    {{shipment.status}}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</div>